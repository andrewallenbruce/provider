---
title: "Missing Information"
output: html_document
---

```{r include = FALSE}
knitr::opts_chunk$set(
  collapse  = TRUE,
  echo      = TRUE, 
  message   = FALSE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "#>",
  dpi       = 300, 
  out.width = "100%",
  fig.path  = "man/figures/README-"
)
```

```{r setup}
library(provider)
```

> Digital contact information, also known as [Endpoints](https://nppes.cms.hhs.gov/webhelp/nppeshelp/HEALTH%20INFORMATION%20EXCHANGE.html), 
> provides a secure way for health care entities to send authenticated, encrypted health information to trusted recipients over the internet. 
> Health care organizations seeking to engage in electronic health information exchange need accurate information about the electronic addresses 
> (for example, Direct address, FHIR server URL, query endpoint, or other digital contact information) of potential exchange partners to 
> facilitate this information exchange.

<br>

## Examples

A provider that appears in the search results of the Missing Information API has no Endpoints entered into the NPPES NPI Registry. For instance, John Clouse (NPI: 1144224569), appears:

```{r}
missing_information(npi = 1144224569) |> 
  provider:::gt_prov(source = gt::md("Source: [CMS Public Reporting of Missing Digital Contact Information](https://data.cms.gov/provider-compliance/public-reporting-of-missing-digital-contact-information)"))
```

<br><br>

Searching for him in the NPPES shows that he has Identifiers, but no Endpoint information:

```{r}
nppes_npi(npi = 1144224569) |> 
  dplyr::select(npi, 
                first_name, 
                last_name, 
                id_identifier, 
                id_issuer, 
                id_state) |> 
  dplyr::filter(dplyr::row_number() %in% c(1, 2)) |> 
  provider:::gt_prov(divider = c("last_name"),
                     source = gt::md("Source: [NPPES NPI Registry](https://npiregistry.cms.hhs.gov/api-page)"))
```

<br><br>

On the other hand, a provider that does not appear in the Missing Information API results should have Endpoint information entered into the NPPES NPI Registry.

```{r, message=TRUE}
missing_information(npi = 1003000423)
```


<br><br>

And checking the NPPES, we see that she does have Endpoint information:

```{r}
nppes_npi(npi = 1003000423) |> 
  dplyr::select("NPI" = npi, 
                "First Name" = first_name, 
                "Last Name" = last_name, 
                Endpoint = end_endpoint,
                Type = end_endpointTypeDescription,
                Description = end_endpointDescription,
                Content = end_contentOtherDescription) |> 
  dplyr::filter(dplyr::row_number() %in% c(1)) |> 
  provider:::display_long() |> 
  provider:::gt_prov(divider = c("name"),
                     source = gt::md("Source: [NPPES NPI Registry](https://npiregistry.cms.hhs.gov/api-page)"))
```

<br><br>

### Data Dictionary

```{r echo=FALSE}
tibble::tibble(
  Variable = c(
    "`npi`", 
    "`first_name`",
    "`last_name`"),
  Description = c(
    "National Provider Identifier", 
    "First Name",
    "Last Name"),
  Definition = c(
    "The provider's 10-digit National Provider Identifier.", 
    "Last name of the provider.", 
    "First name of the provider.")) |> 
  provider:::gt_datadict()
```

<br>

### Related Links

   - [CMS Public Reporting of Missing Digital Contact Information](https://data.cms.gov/provider-compliance/public-reporting-of-missing-digital-contact-information)
   - [Endpoints Information](https://nppes.cms.hhs.gov/webhelp/nppeshelp/HEALTH%20INFORMATION%20EXCHANGE.html)
   - [Methodology & Policy](https://data.cms.gov/sites/default/files/2021-12/8eb2b4bf-6e5f-4e05-bcdb-39c07ad8f77a/Missing_Digital_Contact_Info_Methods%20.pdf)

<br><br>
