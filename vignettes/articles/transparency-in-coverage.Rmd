---
title: "Transparency in Coverage"
subtitle: "Payer Contracting Analysis"
author: "Andrew Bruce"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse  = FALSE,
  echo      = TRUE, 
  message   = FALSE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "#>",
  dpi       = 600, 
  out.width = "100%"
)
options(scipen = 999)
```


```{r message=FALSE, warning=FALSE}
library(provider)
library(tibble)
library(vctrs)
library(dplyr)
library(purrr)
library(gt)
```


```{r}
res <- httr2::request("https://transparency-in-coverage.uhc.com/api/v1/uhc/blobs/") |> 
       httr2::req_perform() |> 
       httr2::resp_body_json(check_type = FALSE, 
                             simplifyVector = TRUE)
res$blobs$name

res$blobs |> 
  tibble::tibble() |> 
  dplyr::slice_tail() |> 
  dplyr::glimpse()
#"2023-11-01_ADAMS-COUNTY-GOVERNMENT_DOCTORS-PLAN-EPO_allowed-amounts.json.gz"
"2023-11-01_6S-DEVELOPMENT-LLC_index.json"
```

