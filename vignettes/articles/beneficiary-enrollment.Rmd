---
title: "Beneficiary Enrollment"
output: html_document
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse  = TRUE,
  echo      = TRUE, 
  message   = FALSE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "#>",
  dpi       = 300, 
  out.width = "100%",
  fig.path  = "man/figures/README-"
)
options(scipen = 999)
```

```{r}
library(provider)
```

> The **Medicare Monthly Enrollment** dataset provides current monthly information on the number of Medicare beneficiaries with hospital/medical/prescription drug coverage, available for several geographic areas including national, state/territory, and county. The data can be further broken down by health care delivery (e.g. *Original Medicare* vs. *Medicare Advantage*) and includes enrollee counts on a rolling 12-month basis, providing information on yearly trends as well.

<br><br>

## Examples

The `level` argument has three options: `National`, `State`, and `County`. 

Setting it to `National` will return yearly and monthly national totals:

```{r}
beneficiary_enrollment(level = "National") |> head(10)
```

<br><br>

Setting `level` to `National` and the `period` argument to `Year` will return yearly national totals only:

```{r}
beneficiary_enrollment(level = "National", period = "Year") |> head(10)
```

<br><br>

Setting `level` to `State` and `period` to `Year` will return yearly totals for each state:

```{r}
beneficiary_enrollment(level = "State", period = "Year") |> head(10)
```

<br><br>

```{r}
beneficiary_enrollment(level = "State", 
                       period = "Month") |> 
  head(10)
```
<br><br>

### `state` & `county`

Select a particular state:

```{r}
beneficiary_enrollment(period = "Year", 
                       level = "State", 
                       state = "GA") |> 
  head(10)
```

<br><br>

Each county in that state:

```{r}
beneficiary_enrollment(period = "Year", 
                       level = "County", 
                       state_name = "Georgia") |> 
  head(10)
```

<br><br>

Or a particular county:

```{r}
beneficiary_enrollment(period = "Year", 
                       level = "County", 
                       state = "GA", 
                       county = "Lowndes") |> 
  head(10)
```

<br><br>






## Data Dictionary

```{r echo=FALSE}
tibble::tribble(
  ~Description,                                                   ~Variable,         ~Definition,
  "Year",                                                          "`year`",          "Indicates the calendar year of Medicare enrollment",
  "Month",                                                         "`month`",           "Indicates the month of Medicare enrollment",
  "Beneficiary State",                                             "`state`",       "Area of beneficiary residence",
  "Beneficiary County",                                            "`county`",                    "County of beneficiary residence",
  "Total Beneficiaries",                                           "`bene_total`",                      "Count of all Medicare beneficiaries",
  "Original Medicare Beneficiaries",                               "`bene_orig`",               "Count of all Original Medicare beneficiaries",
  "Medicare Advantage and Other Health Plan Beneficiaries",         "`bene_ma_oth`",       "Count of all Medicare Advantage and Other Health Plan beneficiaries",
  "Total Aged Beneficiaries",                                       "`bene_aged_total`",         "Count of Medicare aged beneficiaries",
  "Aged ESRD Beneficiaries",                                        "`bene_aged_esrd`",        "Count of Medicare aged beneficiaries with End Stage Renal Disease",
  "Aged Beneficiaries Without ESRD",                                "`bene_aged_no_esrd`",     "Count of Medicare aged beneficiaries without End Stage Renal Disease",
  "Total Disabled Beneficiaries",                                   "`bene_dsb_total`",               "Count of Medicare disabled beneficiaries",
  "Disabled Beneficiaries with ESRD and ESRD Only Beneficiaries",  "`bene_dsb_esrd`", "Count of Medicare disabled beneficiaries with End Stage Renal Disease and beneficiaries with End Stage Renal Disease only", 
  "Disabled Beneficiaries Without ESRD",                          "`bene_no_esrd`", "Count of Medicare disabled beneficiaries without End Stage Renal Disease",
  "Total Medicare Part A and Part B Beneficiaries",               "`bene_ab_total`", "Count of Medicare beneficiaries enrolled in Hospital Insurance (or Part A) and Supplementary Medical Insurance (or Part B)",
        "Original Medicare Part A and Part B Beneficiaries", "`bene_ab_orig`", "Count of Original Medicare beneficiaries enrolled in Hospital Insurance (or Part A) and Supplementary Medical Insurance (or Part B)",
        "Medicare Advantage and Other Health Plan Part A and Part B Beneficiaries", "`bene_ab_ma_oth`", "Count of Medicare Advantage and Other Health Plan beneficiaries enrolled in Hospital Insurance (or Part A) and Supplementary Medical Insurance (or Part B)",
        "Total Medicare Part D beneficiaries", "`bene_rx_total`", "Count of all Medicare Prescription Drug (or Part D) beneficiaries",
        "Total Medicare Prescription Drug Plan beneficiaries", "`bene_rx_pdp`", "Count of Medicare Prescription Drug (or Part D) beneficiaries enrolled in a Prescription Drug Plan",
        "Total Medicare Advantage Prescription Drug Plan beneficiaries", "`bene_rx_mapd`", "Count of Medicare Prescription Drug (or Part D) beneficiaries enrolled in a Medicare Advantage Prescription Drug plan") |> 
  dplyr::select(Variable, Description, Definition) |> 
  provider:::gt_datadict()
```


<br>

## Related Links

   - [Medicare Monthly Enrollment API](https://data.cms.gov/summary-statistics-on-beneficiary-enrollment/medicare-and-medicaid-reports/medicare-monthly-enrollment)
