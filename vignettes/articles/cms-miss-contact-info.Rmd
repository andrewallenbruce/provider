---
title: "Missing Information"
output: html_document
---

```{r include = FALSE}
knitr::opts_chunk$set(
  collapse  = TRUE,
  echo      = TRUE, 
  message   = FALSE, 
  warning   = FALSE,
  error     = TRUE,
  comment   = "#>",
  dpi       = 300, 
  out.width = "100%",
  fig.path  = "man/figures/README-"
)
```

```{r setup}
library(provider)
```

<br>

  > *Information on Providers That are Missing Digital Contact Information in the NPPES System*

<br>

> Digital contact information, also known as [Endpoints](https://nppes.cms.hhs.gov/webhelp/nppeshelp/HEALTH%20INFORMATION%20EXCHANGE.html), 
> provides a secure way for health care entities to send authenticated, encrypted health information to trusted recipients over the internet. 
> Health care organizations seeking to engage in electronic health information exchange need accurate information about the electronic addresses 
> (for example, Direct address, FHIR server URL, query endpoint, or other digital contact information) of potential exchange partners to 
> facilitate this information exchange.

<br>

A provider that appears in the search results of the Missing Information API has no Endpoints entered into the NPPES NPI Registry. For instance, John Clouse (NPI: 1144224569), appears:


```{r}
missing_information(npi = 1144224569) |> 
  gt::gt() |> 
  gt::tab_style(
    style = gt::cell_text(font = c(gt::google_font(name = "Fira Code"), 
                                   gt::default_fonts())),
    locations = gt::cells_body(columns = c(npi))) |> 
  gt::cols_label(npi = "NPI", 
                 last_name = "Last Name", 
                 first_name = "First Name") |> 
  gtExtras::gt_theme_538() |> 
  gt::tab_options(table.width = gt::pct(100)) |> 
  gt::tab_source_note(source_note = "Source: data.cms.gov")
```

<br>

Searching for him in the NPPES shows that he has identifiers but no endpoint information:

```{r}
nppes_npi(npi = 1144224569) |> 
  dplyr::select(npi, 
                first_name, 
                last_name, 
                id_identifier, 
                id_issuer, 
                id_state) |> 
  dplyr::filter(dplyr::row_number() %in% c(1, 2)) |> 
  gt::gt() |> 
  gt::tab_style(
    style = gt::cell_text(font = c(gt::google_font(name = "Fira Code"), 
                                   gt::default_fonts())),
    locations = gt::cells_body(columns = c(npi, id_identifier))) |> 
  gt::cols_label(npi = "NPI", 
                 last_name = "Last Name", 
                 first_name = "First Name",
                 id_issuer = "Issuer",
                 id_identifier = "Identifier",
                 id_state = "State")|> 
  gtExtras::gt_theme_538() |> 
  gt::tab_options(table.width = gt::pct(100)) |> 
  gt::tab_source_note(source_note = "Source: data.cms.gov")
```

<br>

A provider that does not appear has entered Endpoint information into the NPPES NPI Registry.

```{r, message=TRUE}
missing_information(npi = 1003000423)
```


<br>

```{r}
nppes_npi(npi = 1003000423) |> 
  dplyr::select(npi, 
                first_name, 
                last_name, 
                end_endpoint,
                end_endpointTypeDescription,
                end_endpointDescription,
                end_contentOtherDescription) |> 
  dplyr::filter(dplyr::row_number() %in% c(1)) |> 
  gt::gt() |> 
  gt::tab_style(
    style = gt::cell_text(font = c(gt::google_font(name = "Fira Code"), 
                                   gt::default_fonts())),
    locations = gt::cells_body(columns = c(npi))) |> 
  gt::cols_label(npi = "NPI", 
                 last_name = "Last Name", 
                 first_name = "First Name",
                 end_endpoint = "Endpoint",
                 end_endpointTypeDescription = "Type",
                 end_endpointDescription = "Description",
                 end_contentOtherDescription = "Content")|> 
  gtExtras::gt_theme_538() |> 
  gt::tab_options(table.width = gt::pct(100)) |> 
  gt::tab_source_note(source_note = "Source: data.cms.gov")
```


### Data Dictionary

```{r echo=FALSE}
dd <- tibble::tibble(
  Variable = c("`npi`", 
               "`last_name`", 
               "`first_name`"),
  Description = c("National Provider Identifier", 
                  "Last Name", 
                  "First Name"),
  Definition = c("The provider's 10-digit National Provider Identifier.", 
                 "Last name of the provider.", 
                 "First name of the provider."))
dd |> 
  gt::gt() |> 
  gt::fmt_markdown(columns = Variable) |> 
  gtExtras::gt_add_divider(
    columns = c("Variable"), 
    style = "solid",
    color = "gray",
    weight = gt::px(2),
    include_labels = FALSE) |> 
  gtExtras::gt_merge_stack(col1 = Description, 
                           col2 = Definition,
                           small_cap = FALSE,
                           font_size = c("16px", "14px"),
                           font_weight = c("bold", "normal"),
                           palette = c("black", "darkgray")) |> 
  gt::opt_stylize(style = 6, 
                  color = "red", 
                  add_row_striping = FALSE) |> 
  gt::opt_table_lines(extent = "default") |>
  gt::opt_table_outline(style = "none") |> 
  gt::opt_table_font(font = gt::google_font(name = "Karla")) |> 
  gt::tab_options(table.width = gt::pct(100))
```

<br>

### Related Links

   - [CMS Public Reporting of Missing Digital Contact Information](https://data.cms.gov/provider-compliance/public-reporting-of-missing-digital-contact-information)
   - [Endpoints Information](https://nppes.cms.hhs.gov/webhelp/nppeshelp/HEALTH%20INFORMATION%20EXCHANGE.html)
   - [Methodology & Policy](https://data.cms.gov/sites/default/files/2021-12/8eb2b4bf-6e5f-4e05-bcdb-39c07ad8f77a/Missing_Digital_Contact_Info_Methods%20.pdf)

<br><br>
